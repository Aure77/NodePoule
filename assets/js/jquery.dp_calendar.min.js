(function(e){e.fn.dp_calendar=function(t){function K(e,t,n,r){var i="",s,o;o=function(e,t){var n="",r;while(n.length<t){n+=e}n=n.substr(0,t);return n};e+="";n=n!==undefined?n:" ";if(r!=="STR_PAD_LEFT"&&r!=="STR_PAD_RIGHT"&&r!=="STR_PAD_BOTH"){r="STR_PAD_RIGHT"}if((s=t-e.length)>0){if(r==="STR_PAD_LEFT"){e=o(n,s)+e}else if(r==="STR_PAD_RIGHT"){e=e+o(n,s)}else if(r==="STR_PAD_BOTH"){i=o(n,Math.ceil(s/2));e=i+e+i;e=e.substr(0,t)}}return e}function Q(e,t,n){var r="",i=!!n;if(i){for(r in t){if(t[r]===e){return true}}}else{for(r in t){if(t[r]==e){return true}}}return false}function G(){var t,n,u;F=i.getDay();I=e.datepicker.regional[""].dayNames[F];q=i.getDate();U=i.getMonth();z=e.datepicker.regional[""].monthNames[U];R=e.datepicker.regional[""].monthNamesShort[U];W=i.getFullYear();e.fn.dp_calendar.date_selected=i;e.fn.dp_calendar.order_by=s;e.fn.dp_calendar.format_ampm=o;e.fn.dp_calendar.curr_day=F;e.fn.dp_calendar.curr_day_name=I;e.fn.dp_calendar.curr_date=q;e.fn.dp_calendar.curr_month=U;e.fn.dp_calendar.curr_month_name=z;e.fn.dp_calendar.curr_month_name_short=R;e.fn.dp_calendar.curr_year=W;e(X).html("");if(s===1){r.sort(function(e,t){sort=e.startDate>t.startDate*J;return sort})}if(s===2){r.sort(function(e,t){sort=e.title.toLowerCase().localeCompare(t.title.toLowerCase())*J;return sort})}if(s===3){r.sort(function(e,t){e=e.priority;t=t.priority;sort=(e==t?0:e>t?-1:1)*J;return sort})}J*=-1;for(u=1;u<=(new Date(W,U+1,0)).getDate();u++){t=e("<li />");if(q===u){t.addClass("active")}n=document.createTextNode(K(u,2,"0","STR_PAD_LEFT"));e(t).html(n).attr("id","dpEventsCalendar_li_"+(new Date(W,U,u)).getTime());e(X).append(t)}jQuery(e(N).find("li")).css("color",a);jQuery(e(_).find("li")).css("color",a);e(e(X).find("li")).click(function(t){i=new Date(W,U,e(this).html());e(e(X).find("li")).each(function(e){this.className=""});this.className="active";G();h()});e(A).html("");e(A).append("<h1>"+I+"</h1>");e(A).append('<div class="div_month"><span class="span_month">'+R+'</span><br><span class="span_day">'+K(q,2,"0","STR_PAD_LEFT")+"</span></div>");j.datepicker("setDate",i);e(x).html(z+" "+W);e(B).html("<div class='loading'></div>");V=0;e(r).each(function(t){if(typeof this.startDate=="object"){if(W===this.startDate.getFullYear()&&U===this.startDate.getMonth()){e(X).children("li")[this.startDate.getDate()-1].className=e(X).children("li")[this.startDate.getDate()-1].className=="active"?"active":"has_events"}if((new Date(i.getFullYear(),i.getMonth(),i.getDate())).getTime()===(new Date(this.startDate.getFullYear(),this.startDate.getMonth(),this.startDate.getDate())).getTime()){var n,r,s,u;if(V===0){e(B).html("")}V++;n=e("<li />");if(this.priority==1){e(n).addClass("low")}else if(this.priority==2){e(n).addClass("medium")}else{e(n).addClass("urgent")}e(B).append(n);r=e("<div />").addClass("time");if(!o){e(r).html(K(this.startDate.getHours(),2,"0","STR_PAD_LEFT")+":"+K(this.startDate.getMinutes(),2,"0","STR_PAD_LEFT"))}else{e(r).html((this.startDate.getHours()>12?"PM":"AM")+" "+K(this.startDate.getHours()>12?this.startDate.getHours()-12:this.startDate.getHours(),2,"0","STR_PAD_LEFT")+":"+K(this.startDate.getMinutes(),2,"0","STR_PAD_LEFT"))}s=e("<h1 />");e(s).append(this.title);k=e("<div />").addClass("clear");u=e("<p />");e(u).html(this.description);e(n).append(r);e(n).append(s);e(n).append(k);e(n).append(u)}}});e(e(B).find("li")).click(function(t){d();if(e(this).find("p").css("display")==="none"){e(this).find("p").slideDown(300)}else{e(this).find("p").slideUp(300)}});if(V===0){e(B).html(v);}}var n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,_,D,P,H,B,j,F,I,q,R,U,z,W,X,V;var J=1;n=e.extend({},e.fn.dp_calendar.defaults,t);r=n.events_array;i=n.date_selected;s=n.order_by;o=n.format_ampm;u=n.show_datepicker;a=n.link_color;f=n.show_priorities;l=n.show_sort_by;c=n.onChangeMonth;h=n.onChangeDay;p=n.onClickMonthName;d=n.onClickEvents;DP_LBL_EVENTS=e.fn.dp_calendar.regional[""]["DP_LBL_EVENTS"];v=e.fn.dp_calendar.regional[""]["DP_LBL_NO_ROWS"];m=e.fn.dp_calendar.regional[""]["DP_LBL_SORT_BY"];g=e.fn.dp_calendar.regional[""]["DP_LBL_TIME"];y=e.fn.dp_calendar.regional[""]["DP_LBL_TITLE"];b=e.fn.dp_calendar.regional[""]["DP_LBL_PRIORITY"];this.addClass("dp_calendar");this.html("");w=e("<div />").addClass("div_main_date");E=e("<div />").addClass("main_date");e(w).append(E);S=e("<a />").attr({href:"javascript:void(0);",id:"prev_month"}).html("&laquo;");x=e("<a />").attr({href:"javascript:void(0);",id:"toggleDP"});T=e("<a />").attr({href:"javascript:void(0);",id:"next_month"}).html("&raquo;");e(E).append(S);e(E).append(x);e(E).append(T);this.append(w);N=e("<div />").addClass("div_dates");C=e("<ul />").attr("id","list_days");X=C;k=e("<div />").addClass("clear");A=e("<div />").addClass("day_name").attr("id","day_name");e(N).append(X);L=e("<div />").addClass("clear");e(N).append(L);e(N).append(A);L=e("<div />").addClass("clear");e(N).append(L);this.append(N);O=e("<div />").addClass("calendar_list");_=e("<ul />").attr("id","cl_sort_by");D=e("<li />");if(s===1){D.addClass("active")}e(D).html(g);P=e("<li />");if(s===2){P.addClass("active")}e(P).html(y);H=e("<li />");if(s===3){H.addClass("active")}e(H).html(b);e(_).append(D);e(_).append(P);if(f){e(_).append(H)}B=e("<ul />").attr("id","list");if(l){M=e("<h2 />");e(M).html(m);e(O).append(M);e(O).append(_)}else{M=e("<h2 />");e(M).html(DP_LBL_EVENTS);e(O).append(M)}e(O).append(k);e(O).append(B);this.append(O);j=e("<input type='text' />").hide().datepicker({onSelect:function(e,t){i=new Date(e);G()}}).appendTo("body");e(x).click(function(e){if(u===true){if(j.datepicker("widget").is(":hidden")){j.datepicker("show");j.datepicker("widget").position({my:"top",at:"top",of:this})}else{j.hide()}}p();e.preventDefault()});G();e(T).click(function(e){i=i.add(1).month();G();c()});e(S).click(function(e){i=i.add(-1).month();G();c()});e(e(_).find("li")).click(function(t){e(e(_).find("li")).each(function(e){this.className=""});this.className="active";e(e(_).find("li")).each(function(e){if(this.className==="active"){s=e+1}});G()})};e.fn.dp_calendar.defaults={events_array:new Array,date_selected:new Date,order_by:1,show_datepicker:true,show_priorities:true,show_sort_by:true,format_ampm:false,onChangeMonth:function(){},onChangeDay:function(){},onClickMonthName:function(){},onClickEvents:function(){},link_color:"#929292"};e.fn.dp_calendar.date_selected=e.fn.dp_calendar.defaults.date_selected;e.fn.dp_calendar.order_by=e.fn.dp_calendar.defaults.order_by;e.fn.dp_calendar.format_ampm=e.fn.dp_calendar.defaults.format_ampm;e.fn.dp_calendar.curr_day="";e.fn.dp_calendar.curr_day_name="";e.fn.dp_calendar.curr_date="";e.fn.dp_calendar.curr_month="";e.fn.dp_calendar.curr_month_name="";e.fn.dp_calendar.curr_month_name_short="";e.fn.dp_calendar.curr_year="";e.fn.dp_calendar.regional=[];e.fn.dp_calendar.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],DP_LBL_EVENTS:"Events",DP_LBL_NO_ROWS:"No results were found in this date.",DP_LBL_SORT_BY:"SORT BY:",DP_LBL_TIME:"TIME",DP_LBL_TITLE:"TITLE",DP_LBL_PRIORITY:"PRIORITY"};e.fn.dp_calendar.setDate=function(t){e.fn.dp_calendar({date_selected:t})};e.fn.dp_calendar.setDay=function(t){e.fn.dp_calendar({date_selected:new Date(e.fn.dp_calendar.curr_year,e.fn.dp_calendar.curr_month,t)})};e.fn.dp_calendar.setMonth=function(t){e.fn.dp_calendar({date_selected:new Date(e.fn.dp_calendar.curr_year,t,e.fn.dp_calendar.curr_date)})};e.fn.dp_calendar.setYear=function(t){e.fn.dp_calendar({date_selected:new Date(t,e.fn.dp_calendar.curr_month,e.fn.dp_calendar.curr_date)})};e.fn.dp_calendar.getDate=function(){return e.fn.dp_calendar.date_selected};e.fn.dp_calendar.getDay=function(){return e.fn.dp_calendar.curr_date};e.fn.dp_calendar.getMonth=function(){return e.fn.dp_calendar.curr_month};e.fn.dp_calendar.getYear=function(){return e.fn.dp_calendar.curr_year}})(jQuery)